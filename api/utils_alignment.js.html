<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/alignment.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/alignment.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module HelixUI/Utils/Alignment
 * @description
 * Alignment logic in regards to positioning
 *
 * See https://codepen.io/CITguy/pen/b1286136d695391a40a6d708b765361c
 */

/**
 * @typedef {String} AlignmentString
 * @global
 *
 * @description
 * Positions are composed of alignments (e.g., the position `top-left`
 * has alignments `top` and `left`).  Some alignments are axis-specific,
 * while others are not. Alignments `start` and `end` may apply to either
 * horizontal (x-axis) alignment OR vertical (y-axis) aligment.
 *
 * Values:
 * - `bottom`
 * - `center`
 * - `end`
 * - `left`
 * - `middle`
 * - `right`
 * - `start`
 * - `top`
 */

/**
 * @typedef {String} PositionString
 * @global
 *
 * @description
 *
 * **Supported Positions**
 *
 * The following, normalized values are suported.
 * - `bottom-start`
 * - `bottom-left`
 * - `bottom-center`
 * - `bottom-right`
 * - `bottom-end`
 * - `center-middle`
 * - `left-start`
 * - `left-top`
 * - `left-middle`
 * - `left-bottom`
 * - `left-end`
 * - `right-start`
 * - `right-top`
 * - `right-middle`
 * - `right-bottom`
 * - `right-end`
 * - `top-start`
 * - `top-left`
 * - `top-center`
 * - `top-right`
 * - `top-end`
 *
 *
 * **Deprecated Positions**
 *
 * Support for the following values will be removed in a future release.
 * - `bottom`
 * - `center`
 * - `left`
 * - `right`
 * - `top`
 */

const OPPOSITE_ALIGNMENTS = {
    'bottom': 'top',
    'center': 'center',
    'end': 'start',
    'left': 'right',
    'middle': 'middle',
    'right': 'left',
    'start': 'end',
    'top': 'bottom',
};

/**
 * Convert position string into vertical alignment, horizontal alignment,
 * and main axis properties.
 *
 * @param {PositionString} position user-configured position string
 * @returns {Object} alignment metadata
 */
export function getAlignment (position) {
    let crossAlign; // cross-axis alignment
    let crossAxis = getCrossAxis(position);
    let mainAlign; // main-axis alignment
    let mainAxis = getMainAxis(position);
    // x-axis and y-axis alignment (in relation to viewport coordinates)
    let yAlign = getVerticalAlignment(position);
    let xAlign = getHorizontalAlignment(position);

    // https://regex101.com/r/1oRJf8/7
    let startEndMatch = position.match(/(start|end)$/);
    if (startEndMatch) {
        if (mainAxis === 'x') {
            yAlign = startEndMatch[0];
        } else {
            xAlign = startEndMatch[0];
        }
    }

    // determine main-axis and cross-axis alignment
    if (mainAxis === 'x') {
        mainAlign = xAlign;
        crossAlign = yAlign;
    } else {
        mainAlign = yAlign;
        crossAlign = xAlign;
    }

    return {
        crossAlign,
        crossAxis,
        mainAlign,
        mainAxis,
        xAlign,
        yAlign,
    };
}

/**
 * Determine secondary axis (x or y; opposite of main axis) from position.
 *
 * @param {PositionString} position
 * @returns {Enum&lt;String>}
 */
export function getCrossAxis (position) {
    return (getMainAxis(position) === 'x' ? 'y' : 'x');
}

/**
 * Determine x-axis alignment from position
 *
 * @param {PositionString} position
 * @returns {AlignmentString}
 */
export function getHorizontalAlignment (position) {
    let xAlign = 'center';

    // https://regex101.com/r/1oRJf8/5
    let hMatch = position.match(/^(left|right)|(left|right)$/);
    if (hMatch) {
        xAlign = hMatch[0];
    }

    return xAlign;
}

/**
 * Determine primary axis (x or y) from position
 *
 * @param {PositionString} position
 * @returns {Enum}
 */
export function getMainAxis (position) {
    // https://regex101.com/r/1oRJf8/1
    if (/^(top|bottom)/.test(position)) {
        return 'y';
    } else {
        return 'x';
    }
}

/**
 * Determine y-axis alignment from position
 *
 * @param {PositionString} position
 * @returns {AlignmentString}
 */
export function getVerticalAlignment (position) {
    let yAlign = 'middle';

    // https://regex101.com/r/1oRJf8/4
    let vMatch = position.match(/^(top|bottom)|(top|bottom)$/);
    if (vMatch) {
        yAlign = vMatch[0];
    }

    return yAlign;
}

/**
 * Calculates position string that is horizontally opposite of given position.
 *
 * @param {PositionString} position
 * @returns {PositionString} horizontally inverted position string
 */
export function invertPositionHorizontally (position) {
    let { mainAxis, xAlign, yAlign } = getAlignment(position);
    let newXAlign = OPPOSITE_ALIGNMENTS[xAlign];
    return mainAxis === 'x' ? `${newXAlign}-${yAlign}` : `${yAlign}-${newXAlign}`;
}

/**
 * Calculates position string that is vertically opposite of given position.
 *
 * @param {PositionString} position
 * @returns {PositionString} vertically inverted position string
 */
export function invertPositionVertically (position) {
    let { mainAxis, xAlign, yAlign } = getAlignment(position);
    let newYAlign = OPPOSITE_ALIGNMENTS[yAlign];
    return mainAxis === 'x' ? `${xAlign}-${newYAlign}` : `${newYAlign}-${xAlign}`;
}

/**
 * Normalize user-configured position to "{mainAlign}-{crossAlign}" format.
 *
 * - "top" -> "top-center"
 * - "right" -> "right-middle"
 * - "center" -> "center-middle"
 * - etc.
 *
 * @param {PositionString} position
 * @returns {PositionString}
 */
export function normalizePosition (position) {
    let { crossAlign, mainAlign } = getAlignment(position);
    return `${mainAlign}-${crossAlign}`;
}

/**
 * @param {PositionString} position
 * @param {PredicateCollisions} collides
 */
export function optimizePositionForCollisions (position, collides) {
    let { xAlign, yAlign } = getAlignment(position);

    // COLLIDE TOP
    // 'top-*' -> 'bottom-*' (CHANGE)
    // '{H}-top' -> '{H}-bottom' (CHANGE)
    // 'bottom-*' -> 'bottom-*' (no change)
    // '{H}-bottom' -> '{H}-bottom' (no change)
    // '{H}-start|middle|end' -> '{H}-start|middle|end' (no change)
    if (collides.top &amp;&amp; yAlign === 'top') {
        position = invertPositionVertically(position);
    }

    // COLLIDE BOTTOM
    // 'bottom-*' -> 'top-*' (CHANGE)
    // '{H}-bottom' -> '{H}-top' (CHANGE)
    // 'top-*' -> 'top-*' (no change)
    // '{H}-top' -> '{H}-top' (no change)
    // '{H}-start|middle|end' -> '{H}-start|middle|end' (no change)
    if (collides.bottom &amp;&amp; yAlign === 'bottom') {
        position = invertPositionVertically(position);
    }

    // COLLIDE LEFT
    // 'left-*' -> 'right-*' (CHANGE)
    // '{V}-left' -> '{V}-right' (CHANGE)
    // 'right-*' -> 'right-*' (no change)
    // '{V}-right' -> '{V}-right' (no change)
    // '{V}-start|center|end' -> '{V}-start|center|end' (no change)
    if (collides.left &amp;&amp; xAlign === 'left') {
        position = invertPositionHorizontally(position);
    }

    // COLLIDE RIGHT
    // 'right-*' -> 'left-*' (CHANGE)
    // '{V}-right' -> '{V}-left' (CHANGE)
    // 'left-*' -> 'left-*' (no change)
    // '{V}-left' -> '{V}-left' (no change)
    // '{V}-start|center|end' -> '{V}-start|center|end' (no change)
    if (collides.right &amp;&amp; xAlign === 'right') {
        position = invertPositionHorizontally(position);
    }

    // TODO: What if both sides of an axis collide?
    // e.g., both left/right or top/bottom collide

    return position;
}

export default {
    getAlignment,
    getCrossAxis,
    getHorizontalAlignment,
    getMainAxis,
    getVerticalAlignment,
    invertPositionHorizontally,
    invertPositionVertically,
    normalizePosition,
    optimizePositionForCollisions,
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-HelixUI.html">HelixUI</a></li><li><a href="module-HelixUI_Utils.html">HelixUI/Utils</a></li><li><a href="module-HelixUI_Utils_Alignment.html">HelixUI/Utils/Alignment</a></li><li><a href="module-HelixUI_Utils_Offset.html">HelixUI/Utils/Offset</a></li></ul><h3>Externals</h3><ul><li><a href="external-CustomEvent.html">CustomEvent</a></li><li><a href="external-DOMRect.html">DOMRect</a></li><li><a href="external-Element.html">Element</a></li><li><a href="external-Event.html">Event</a></li><li><a href="external-HTMLElement.html">HTMLElement</a></li><li><a href="external-HTMLTemplateElement.html">HTMLTemplateElement</a></li></ul><h3>Classes</h3><ul><li><a href="HXAccordionElement.html">HXAccordionElement</a></li><li><a href="HXAccordionPanelElement.html">HXAccordionPanelElement</a></li><li><a href="HXAlertElement.html">HXAlertElement</a></li><li><a href="HXBusyElement.html">HXBusyElement</a></li><li><a href="HXCheckboxControlElement.html">HXCheckboxControlElement</a></li><li><a href="HXCheckboxElement.html">HXCheckboxElement</a></li><li><a href="HXDisclosureElement.html">HXDisclosureElement</a></li><li><a href="HXDivElement.html">HXDivElement</a></li><li><a href="HXDropFenceElement.html">HXDropFenceElement</a></li><li><a href="HXElement.html">HXElement</a></li><li><a href="HXErrorElement.html">HXErrorElement</a></li><li><a href="HXFileIconElement.html">HXFileIconElement</a></li><li><a href="HXFileInputElement.html">HXFileInputElement</a></li><li><a href="HXFileTileElement.html">HXFileTileElement</a></li><li><a href="HXFormControlElement.html">HXFormControlElement</a></li><li><a href="HXIconElement.html">HXIconElement</a></li><li><a href="HXMenuElement.html">HXMenuElement</a></li><li><a href="HXMenuitemElement.html">HXMenuitemElement</a></li><li><a href="HXModalElement.html">HXModalElement</a></li><li><a href="HXPillElement.html">HXPillElement</a></li><li><a href="HXPopoverElement.html">HXPopoverElement</a></li><li><a href="HXProgressElement.html">HXProgressElement</a></li><li><a href="HXRadioControlElement.html">HXRadioControlElement</a></li><li><a href="HXRadioElement.html">HXRadioElement</a></li><li><a href="HXRevealElement.html">HXRevealElement</a></li><li><a href="HXSearchAssistanceElement.html">HXSearchAssistanceElement</a></li><li><a href="HXSearchElement.html">HXSearchElement</a></li><li><a href="HXSelectControlElement.html">HXSelectControlElement</a></li><li><a href="HXSelectElement.html">HXSelectElement</a></li><li><a href="HXTabcontentElement.html">HXTabcontentElement</a></li><li><a href="HXTabElement.html">HXTabElement</a></li><li><a href="HXTablistElement.html">HXTablistElement</a></li><li><a href="HXTabpanelElement.html">HXTabpanelElement</a></li><li><a href="HXTabsetElement.html">HXTabsetElement</a></li><li><a href="HXTextareaControlElement.html">HXTextareaControlElement</a></li><li><a href="HXTextControlElement.html">HXTextControlElement</a></li><li><a href="HXToastElement.html">HXToastElement</a></li><li><a href="HXTooltipElement.html">HXTooltipElement</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:Accordion:panelchange">Accordion:panelchange</a></li><li><a href="global.html#event:AccordionPanel:close">AccordionPanel:close</a></li><li><a href="global.html#event:AccordionPanel:open">AccordionPanel:open</a></li><li><a href="global.html#event:Alert:dismiss">Alert:dismiss</a></li><li><a href="global.html#event:Alert:submit">Alert:submit</a></li><li><a href="global.html#event:FileTile:cancel">FileTile:cancel</a></li><li><a href="global.html#event:FileTile:delete">FileTile:delete</a></li><li><a href="global.html#event:FileTile:retry">FileTile:retry</a></li><li><a href="global.html#event:Modal:close">Modal:close</a></li><li><a href="global.html#event:Modal:open">Modal:open</a></li><li><a href="global.html#event:Pills:dismiss">Pills:dismiss</a></li><li><a href="global.html#event:Reveal:close">Reveal:close</a></li><li><a href="global.html#event:Reveal:open">Reveal:open</a></li><li><a href="global.html#event:Revealable:close">Revealable:close</a></li><li><a href="global.html#event:Revealable:open">Revealable:open</a></li><li><a href="global.html#event:Search:blur">Search:blur</a></li><li><a href="global.html#event:Search:clear">Search:clear</a></li><li><a href="global.html#event:Search:focus">Search:focus</a></li><li><a href="global.html#event:Tabpanel:close">Tabpanel:close</a></li><li><a href="global.html#event:Tabpanel:open">Tabpanel:open</a></li><li><a href="global.html#event:Tabset:tabchange">Tabset:tabchange</a></li><li><a href="global.html#event:Toast:dismiss">Toast:dismiss</a></li><li><a href="global.html#event:Toast:submit">Toast:submit</a></li></ul><h3>Interfaces</h3><ul><li><a href="Positionable.html">Positionable</a></li><li><a href="Revealable.html">Revealable</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Apr 04 2019 16:13:20 GMT-0500 (CDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
